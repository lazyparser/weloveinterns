# 常用的linux命令行:

首先打开终端，可用 Ctrl+Alt+T 快捷键打开.

## 1.一些简单的命令

下面是一些常用的简单命令：

**日期**

    date //显示当前时间
    cal //显示日历（一般是一整个月）

**磁盘**

    df //查看磁盘剩余空间
    free  //显示空闲内存数量

**结束终端**

    exit

**幕后控制台**

幕后控制台是和终端仿真器环境相同，不过外表不太美观，在不打开终端的情况下，也可以调用幕后

控制台.幕后控制台一共有6个，可以分别用下列命令打开：

    Ctrl+Alt+F1
    Ctrl+Alt+F2
    Ctrl+Alt+F3
    Ctrl+Alt+F4
    Ctrl+Alt+F5
    Ctrl+Alt+F6

## 2.文件系统的跳转

**主要命令：**

    pwd        //打印输出当前工作目录
    cd         //更改目录
    ls         //列出目录里所包含的内容

下面对这些命令详细介绍：

### 2.1 pwd 和 ls 命令

pwd 和 ls 命令比较直观，只需要注意 ls 命令后面可以跟有一些参数，用以控制输出的格式和内容,具体如下表

    ls -options //统一格式

    ls -a       //输出所有文件，包括隐藏文件
    ls -d       //目录本身的信息
    ls -F       //在每个名字后加上指示符，用以区分目录和文件，若是目录，则加‘/’
    ls -h       //以长格式列出时，以人们可读格式输出，例如文件大小不能以字节数显示
    ls -l       //以长格式显示结果
    ls -r       //以相反的顺序来显示结果，不加 -r 选项,默认按照字母升序排列
    ls -S       //输出结果以文件大小来排序
    ls -t       //按照修改时间排序

### 2.2 cd 命令

相比之下，cd 命令后跟两种路径表示法：

**绝对路径**

绝对路径开始于根目录，以 ‘/’ 开头表示，例如：

    cd /usr/bin  //进入主目录下的 usr 目录中的 bin 目录

上面的是绝对路径表示法，下面介绍相对路径表示法：    

**相对路径**

相对路径主要注意两个，父目录和子目录

    cd ..        //进入到当前目录的上一级目录,即父目录中去
    cd ./dir     //进入到当前目录的子目录 dir
    cd dir       //进入到当前目录的子目录 dir

*小提示：如果觉得每次输入长长的文件名和目录名很麻烦，你要记住Linux对你很贴心，所以提供了自动补全功能，输入开头几个字母，按下Tab键，即可自动补全文件名,但是要注意，Tab键只能补全唯一的名字，如果有多个文件名与开头几个字母匹配，则无法自动补全.*

其它常用的 cd 命令：

    cd             //切换到主目录下，即用户家目录
    cd -           //切换到上一个工作目录
    cd ~user_name  //切换到用户名为 user_name 的家目录下

## 3. 操作系统有关的命令行

    file        //确定文件类型
    less        //浏览文件内容

### 3.1 file 命令    

file filename 会显示出文件内容的简单描述。如下



### 3.2 less 命令

less 命令用以浏览文本文件内容，用法如下：

    less filename
    less /etc/filename

less 程序在浏览时常用到的命令如下：

    PageUp or b        //向上翻一页
    PageDown or space  //向下翻一页
    Up Arrow           //向上一行
    Down Arrow         //向下一行
    G                  //移动到最后一行
    1G or g            //移动到开头一行
    /characters        //向前查找制定字符串
    n                  //向前查找下一个出现的字符串，与 /characters 命令配合使用
    q                  //推出 less 阅览界面，回到终端

## 4. 文件和目录相关操作

主要命令：

    cp                  //复制文件和目录
    mv                  //移动or重命名文件和目录
    mkdir               //创建目录
    rm                  //删除文件和目录
    ln                  //创建硬链接和符号链接

### 4.1 通配符

首先介绍通配符，相当于对文件（夹）名的模糊匹配.

    通配符           意义

    *               匹配任意多个字符（包括零个或一个）
    ?               匹配任意一个字符（不包括零个）
    [characters]    匹配任意一个属于字符集中的字符
    [!characters]   匹配任意一个不属于字符集中的字符
    [[:class:]]     匹配任意一个属于制定字符类中的字符

    常用字符类       意义

    [:alnum:]       匹配任意一个字母或者数字
    [:alpha:]       匹配任意一个字母
    [:digit:]       匹配任意一个数字
    [:lower:]       匹配任意一个小写字母
    [:upper:]       匹配任意一个大写字母

    匹配模式         匹配对象

    *               所有文件
    g*              文件名以 “g” 开头的文件
    b*.txt          以“b”开头，中间有另个或者任意多个字符，并且以“.txt”结尾的文件
    Data???         以"Data"开头，其后紧跟3个字符的文件
    [abc]*          文件名以"a","b"，或"c"开头的文件
    BACKUP.[0-9]    以"BACKUP"开头，并且紧跟一个数字的文件
    [[:upper:]]*    以大写字母开头的文件
    [![:digit:]]    不以数字开头的文件
    *[[:lower:]123] 文件名以小写字母结尾，或以"1","2",或"3"结尾的文件

------------------------------------------------------------------------------*

### 4.2 mkdir 创建目录命令

    mkdir directory

需要注意，可以同时创建多个目录：

    mkdir dir1 dir2 dir3

### 4.3 cp 复制文件和目录

将item1复制到item2中去

    cp item1 item2

也可以将多个目录或文件复制到同一个目录下：

    cp item... directory

cp命令后面也常跟一些附加选项，用以控制命令的效果. 下面列出一些常见选项：

    选项                意义

    -a                 复制文件和目录，以及它们的属性，包括权限信息
    -i                 重写已存在文件前，提示用户确认. 若不指定，默认重写
    -r                 递归复制目录以及目录中的内容，如果要复制的时目录，则需要此选项
    -u                 复制时仅复制目标目录中不存在的文件，或者更新已经存在的文件
    -v                 显示详实的命令操作信息

### 4.4 mv 移动和重命名文件

mv的用法跟cp基本相同，但是mv操作之后，原来目录下的文件不再存在.

    mv item1 item2

表示把文件或者目录"item1"移动或者重命名未"item2",此时item1则被删除，只剩下item2.

如要移动或者重命名多个条目，则可用如下命令：

    mv item... directory

mv 与 cp 一样，也可以附加一些选项，常见选项如下：

    选项                意义

    -i                 重写已有文件之前，提示用户确认信息
    -u                 只更新目标文件或文件夹中没有的内容
    -v                 显示详实操作信息

### 4.5 rm 删除文件和目录

    rm item

同上面操作命令一样，rm 命令也有基本相同的选项：

    选项               意义

    -i                删除文件前，提示用户确认信息
    -r                递归删除文件，删除目录时必须指定此选项
    -f                忽视不存在的文件，不显示提示信息
    -v                显示详实操作信息

    例子               意义

    rm file1          默默删除文件
    rm -i file1       删除文件之前提示用户确认信息
    rm -r file1 dir1  删除文件file1和目录dir1 以及dir1中的内容.
    rm -rf file1 dir1 同上，如果file1或者dir1不存在，rm仍会执行

*温馨提示：用rm命令时，尤其注意通配符的使用，有可能会删除掉大量我们不想删除的文件*

### 4.6 ln 命令创建链接

ln命令既可以创建硬链接也可以创建符号链接，用法如下：

    ln item link		  //创建硬链接
    ln -s item link		//创建符号链接

**注意**
> 硬链接无法关联其所在文件系统之外的文件,不与链接在同一分区，无法关联
>
> 硬链接无法关联一个目录

**符号链接**

相当于一个快捷方式

    ls -s fun fun-sym           //fun-sym 链接到 fun
    ls -s ../fun dir1/fun-sym   //dir1文件夹下的一个fun-sym链接到上一级目录中的fun文件
    ls -s ../fun dir2/fun-sym

创建符号链接，既可以使用绝对路径，也可以使用相对路径。另外，符号链接也可以关联目录。

当对链接进行操作时，我们实际上时对链接所指向的对象进行操作。但rm命令除外

    rm fun-sym
    rm fun-hard

都是删除链接本身，而不会删除链接指向的对象

当我们删除链接指向的对象后，与对象相关联的链接随之损坏

## 5 命令

常用命令以及意义如下：

    命令			   	意义

    type         说明一个命令的属性
    which        显示会执行那个可执行程序
    man          显示命令手册
    apropos      显示一系列合适的命令
    info         显示命令info
    whatis       显示一个命令的简介描述
    alias        创建命令别名

### 5.1 type 命令显示命令的类型

    type command

例如输入一些命令名测试如下：

    type type
    type ls

### 5.2 which 命令显示一个可执行程序的位置

    which ls

注意，此命令只对可执行程序有效，不包括内部命令和命令别名

例如 cd 命令，是一个shell内部命令，用 which 命令查找时得不到正确的回应

要查看一个命令的属性，可以用上面的 type 命令，如果是内部命令，会提示

built-in

### 5.3 help 得到内部命令的帮助文档

用法如下：

    help command

许多可执行程序也支持 --help 选项，用以显示命令的用法说明：

    mkdir --help

### 5.4 man 显示程序手册页

用法：

    man command

此命令在 less 阅读程序中显示命令的参考手册，分为及部分，各部分对应如下：

    章节        内容

    1         用户命令名
    2         程序接口的内核系统调用
    3         C库函数程序接口
    4         特殊文件，比如设备节点和驱动程序
    5         文件格式
    6         游戏娱乐，如屏幕保护程序
    7         其它方面
    8         系统管理命令

可以用man命令制定显示章节内容，例如

    man 5 passwd

### 5.5 apropos 显示适当的命令

    apropos search_term

用以搜寻含有search_term的参考文档

man命令加上 “-k” 选项,也能完成此项工作

### 5.6 whatis 显示命令的简要说明

### 5.7 info 显示程序 info 信息

### 5.8 alias 定义命令别名

如果你觉得linux常用的命令行太长或者太难记，则可以用别名来替代，这样每次只需要输入别名

即可启动命令. 别名定义方法：

    alias newName='command1; command2; command3'

注意 “newName” 和 “=” 之间是没有空格存在的.

下次我们想运行 command1，comman2,command3 时，即可直接输入 newName

若要删除别名，则只需输入如下命令：

    unalias newName

需要注意的是，直接在命令行中定义的别名只是暂时的，如果关闭了终端，再次打开终端时，

别名就消失了，如要长期保持别名存在，需要在系统文件中定义.

## 6. I/O 重定向

I/O 重定向简单来说就是将改变输入/输出的方向，例如从标准输出变为输出到指定文件等.

常见命令如下：

    命令            意义

    cat            连接文件
    sort           排序文本行
    unique         省略重复行
    grep           打印匹配行
    wc             打印文件中的换行符，字和字节个数
    head           输出文件第一部分
    tail           输出文件中最后一部分

### 6.1 标准输入/输出、标准错误

Unix哲学中，最核心的一点就是一切皆是文件，标准输入/输出、标准错误都是文件.

通常情况下标准输出和标准错误都连接到屏幕，标准输入连接到键盘.

I/O 重定向可以将程序的运行结果信息保存到文件中，便于后续查看.

**重定向标准输出**

重定向标准输出到一个文件，可以使用 “>” 重定向符, 后跟文件名.

例如：

    ls -l /usr/bin > ls-output.txt

将目录 /usr/bin 的列表信息输出到文件 ls-output.txt 中去.

但是要注意, 上面的重定向符只是重定向标准输出，而对标准错误则不起作用.

例如我们让 ls 后跟一个不存在的目录，让其输出错误信息：

    ls -l /bin/usr > ls-output.txt

但是我们会在屏幕上看到一条提示目录不存在的错误信息, 细想一下，我们已经将输出重定向到

文件 ls-output.txt 中了，但错误信息还是输出到了屏幕上，而且当你打开文件 ls-output.txt

时，你会发现文件是空的. 这是因为标准错误和标准输出不同，ls 指令将错误信息输送到标准错误

而非标准输出，但是我们仅仅重定向了标准输出，而没有重定向标准错误，因此错误信息输出到屏幕

另外需要注意，重定向操作会重写文件, 原来文件中的内容会被抹去，相当于删除了原来的文件

如果想把重定向的输出结果追加到文件后面，可以使用 “>>” 顶相符，如下：

    ls -l /usr/bin >> ls-output.txt

如果文件 ls-output.txt 不存在，则会创建此文件.

**重定向标准错误**

shell 中，没有专门的重定向标准错误操作符，可以用文件描述符来定义.

标准输入、标准输出、标准错误的文件描述符分别是 0, 1, 2, 重定向标准错误可以如下：

    ls -l /bin/usr 2> ls-error.txt

文件描述符 "2" ，后面紧跟重定向标准输出，组合成重定向标准错误到文件 ls-error.txt 中.

**重定向标准输出和标准错误到同一文件**

有两种方法：

利用 2>&1 操作符

    ls -l /bin/usr > ls-output.txt 2>&1

*******************************************************************************

需要十分注意重定向的顺序，标准错误的重定向必须只能出现在标准输出重定向之后

如果上面的命令改为:

    ls -l /bin/usr 2>&1 ls-output.txt

则标准错误定向到屏幕而不是文件中


利用 &> 操作符

    ls -l /bin/usr &> ls-output.txt

### 6.2 cat 连接文件

    cat [files]

cat 后面跟文件时，会把多个文件拼合起来，就像它们是一个文件中的内容一样.

单独的 cat 命令会等待标准输入

    cat

如果我们输入“I love Linux”，然后输入 Ctrl+d ，则此文本行重复出现. 下面命令行：

    cat > test.txt

此命令会等待从标准输入读取数据，直到遇见 Ctrl+d ，然后将文本存入到 test.txt 中去.

**重定向标准输入**

    cat < test.txt

“<” 操作符是重定向输入操作符，将标准输入源从键盘改到文件 test.txt.

### 6.3 管道线

一i个命令的标准输出可以作为另一个命令的标准输入

    command1 | command2

例如： less 命令接受标准输入，可将 ls 输出结果作为less的标准输入：

    ls -l /usr/bin | less

### 6.4 过滤器

多个命令放在一起组成管线的命令序列成为过滤器

    ls /bin /usr/bin | sort | less

ls 命令的对于每一个目录的输出都是由有序列表组成，各自针对一个目录，经过sort之后，

该表输出数据产生一个有序列表.

### 6.5 uniq 忽略重复行

    ls /bin /usr/bin | sort | uniq | less

输出的结果不含有重复行. 但是如果我们向看到重复的列表可在 uniq 之后加上选项 -d

    ls /bin /usr/bin | sort | uniq -d | less

### 6.6 wc 打印行、字和字节数

    wc ls-output.txt    #打印行数,字数，字节数
    wc -l ls-output.txt #只打印行数

### 6.7 grep 打印匹配行

比如要找到文件名中包含单词“zip”的所有文件，可以用如下命令

    grep zip
    grep -i     #忽略大小写搜索
    grep -v     #只打印不匹配的行

### 6.8 head / tail 打印文件开头/结尾部分

head 默认打印文件前十行，tail 默认打印文件后十行，也可添加 -n 选项来调整打印行数

    head -n 5 ls-output.txt
    tail -n 5 ls-output.txt

### 6.9 tee 从stdin读取数据，并同时输出到stdout和文件

    ls /usr/bin | tee ls.txt | grep zip

上述命令均可应用在管道线中.

## 7. 键盘操作高级技巧

    clear       #清屏
    history     #显示历史列表

### 7.1 光标移动快捷键

    按键          效果

    Ctrl+a       移动光标到行首
    Ctrl+e       移动光标到行尾
    Ctrl+f       光标向右一个字符，相当于右箭头
    Ctrl+b       光标向左一个字符，相当于左箭头
    Alt+f        光标前移一个字
    Alt+b        光标后移一个字
    Ctrl+l       清空屏幕，相当于clear

### 7.2 文本修改快捷键

    按键            效果

    Ctrl+d         删除光标所在位置的字符
    Ctrl+t         光标位置字符和
    Alt+t          光标位置字和前面的字互换位置
    Alt+l          光标位置到字尾的字符转成成小写字母
    Alt+u          光标位置到字尾的字符转换成大写字母

### 7.3 剪切和粘贴文本

    按键            效果

    Ctrl+k         剪切从光标位置到行尾的文本
    Ctrl+u         剪切从光标位置到行首的文本
    Alt+d          剪切从光标位置到词尾的文本
    Alt+Backspace  剪切从光标位置到词头的文本，若在一个单词词头，剪切前一个单词
    Ctrl+y         粘贴文本到光标位置

**需要注意的是，一些电脑上的一些Alt组合键可能不能出现上述控制效果**

### 7.4 自动补全

    按键            效果

    Tab            自动补全
    Alt+?          显示可能的自动补全列表，也可以按两次Tab键来实现
    Alt+*          插入所有可能的自动补全

### 7.5 历史命令

    history

默认显示最近500条历史命令.

常用的命令及意义如下：

    命令                        意义

    history | less             显示最近500条命令，输出到 less 程序
    !88                        显示历史列表第88行内容
    Ctrl+r                     递增搜索
    Ctrl+j                     复制命令
    Ctrl+p                     移动到上一历史命令，等同于上箭头
    Ctrl+n                     移动到下一历史命令，等同于下箭头
    Alt+<                      移动到历史列表开头
    Alt+>                      移动到历史列表结尾，即当前命令行
    Ctrl+r                     反向递增搜索，从当前命令行开始，向上递增搜索
    Alt+p                      反向搜索，非递增顺序，输入要查找的字符串，Enter
    Alt+n                      向前搜索，非递增顺序
    Ctrl+o                     执行历史列表当前项，并移动到下一个

### 7.6 历史命令展开

    命令                        意义

    !!                         重复最后一次执行的命令，等同于上箭头
    !n                         重复历史列表中第 n 行的命令
    !string                    重复最近历史列表中，以这个字符串开头
    !?string                   重复最近历史列表中，包含这个字符串的命令

## 8. 权限操作

    命令                        意义

    id                         显示用户身份号
    chmod                      更改文件模式
    umask                      设置默认的文件权限
    su                         以另一个用户身份来运行shell（提高权限）
    sudo                       以另一个用户的身份来执行命令（提高权限）
    chown                      更改文件所有者
    chgrp                      更改文件所有权

文件的权限包括 可读（r）、可写（w）、可执行（x）.

### 8.1 chmod 改变用户对文件的访问权限

chmod命令使用符号表示法来完成命令：

影响对象+执行操作+权限类别

影响对象包括以下几种：

    u                   user，文件或者目录所有者
    g                   用户组
    o                   others，其他所有的人
    a                   all，u,g,o三者的联合

如果没有制定字符，则默认使用 a 选项.

执行操作有三种，添加（+），删除（-），指定（=，其它权限被删除）

权限类别有上面所说的 r，w，x 三种.

下面是一些组合例子

    命令                    意义

    u+x                    为文件所有者添加可执行权限
    u-x                    删除文件所有者的可执行权限
    +x                     为所有人添加可执行权限
    o-rw                   除了文件所有者和用户组，删除其他所有人的读权限和写权限
    go-rw                  给群组的主任和任意文件拥有者的人读写权限,并且删除执行权限
    u+x,go=rw              给文件所有者可执行权限，并且给组合其他人读写权限

## 8.2 umask 设置掩码改变用户对文件的权限

umask 后加掩码值，可以设置用户对文件的访问权限。

掩码值是4位八进制数表示的，每一位都代表了一类使用者

    掩码                      二进制数                  权限

    0000                  000 000 000 000           -rw-rw-rw-
    0002                  000 000 000 010           -rw-rw-r--

即：二进制中数字1出现的位置，相应的属性被删除.

### 8.3 更改用户身份

        命令                     作用

        su [-[1]] [user]        切换到另一个 user 用户
        su -                    切换到超级用户,切换之后，会提示输入密码并出现#提示符
        exit                    退出超级用户登陆
        su - 'command'          只对本条命令以超级用户执行

除了用 su 命令，用户还可以用 sudo 命令来允许一个普通用户以不同的身份来执行命令.

sudo 不要求使用超级用户密码, 用户可用自己的登录密码进行认证, sudo 所跟的命令不需要用‘’

包含起来,因为sudo命令不会启动一个shell.

### 8.4 chown 更改文件所有者和用户组

    chown [owner] [:[group]] file...

例如：

    参数                      结果

    bob                      把文件所有者从当前属主改为用户bob
    bob:users                把文件所有者噶为用户bob，文件用户组改为users
    :admins                  把文件用户组改为admins，文件所有者不变

    bob:                     文件所有者改为用户bob,文件用户组改为bob登陆时所属的用户组

### 8.5 更改用户密码

更改用户 user 的密码

    passwd [user]

若要更改当前用户的密码，可直接输入 passwd，shell会提示输入旧密码和新密码

*******************************************************************************

## 9. 进程

    ps                    报告当前进程快照
    top                   显示任务
    jobs                  列出活跃的任务
    bg                    把一个任务放到后台
    fg                    把一个任务放到前台
    kill                  给一个进程发送信号
    killall               杀死指定名字的进程
    shutdown              关机或者重启系统

### 9.1 ps 命令，查看进程

ps 可单独使用，也可后跟选项来构成特殊的进程查看指令

默认情况下，ps命令只列出与当前终端会话相关的进程，加上x选项，是告诉ps命令，展示所有进程

		ps aux

显示每个用户的进程详细信息

### 9.2 top 命令动态显示进程信息

		top

显示进程动态信息，默认情况下，每三分钟更新一次，top显示结果由系统概要和进程列表两大部分

组成，以CPU使用率排序，top程序可以接受一系列从键盘输入的命令，两个最常用的命令是h和q，

h显示程序的帮助屏幕， q为退出top程序

### 9.3 Ctrl+c 中断进程

		Ctrl+c

Ctrl+c 中断一个程序，注意，后台程序是不能采用此方法中断的.

### 9.4 bg 把进程放到后台执行

在输入命令启动程序时，可以在程序名称后面加上&符号，使得程序在后台执行，终端会返回提示

符，此时可用ps命令或者jobs命令查看进程信息

### 9.5 fg 进程返回到前台

    fg %n

其中 %n 表示工作序号为 n 的进程，如果只有一个后台进程，则 %n 可省略.

将进程返回到前台之后，即可通过Ctrl+c来终止进程.

### 9.6 Ctrl+z 停止进程

停止进程不同于终止进程，停止进程只是将进程暂停，移动到后台进行等待.

    Ctrl+z

进程暂停之后，可以用 fg 将进程移动到前台执行，也可以用 bg 将进程移动到后台执行

    bg %n

同样，如果只有一个进程，%n 可以省略

### 9.7 kill 命令发送的信号

    信号编号      信号名         含义

    1            HUP           挂起
    2            INT           中断
    9            KILL          杀死（强制）
    15           TERM          终止
    18           CONT          继续
    19           STOP          停止（暂停）

其它一些系统信号：

    信号编号       信号名        含义

    3             QUIT          退出
    11            SEGV          段错误
    20            TSTP          终端停止
    28            WINCH         改变窗口大小

可以用 kill -l 来得到完整的信号列表.

### 9.8 killall 给多个进程发送信号

    killall [-u user] [-signal] processName...

### 9.9 其它一些进程相关命令

    命令                意义

    pstree             输出树形进程列表
    vmstat             输出系统资源使用快照，可加延时秒数（vmstat 5）,Ctrl+c终止
    xload              图形界面程序，画出系统负载图形
    tload              在终端画出系统负载图形，使用Ctrl+c终止输出

****************************************************************************

## 10. Shell环境

TODO
